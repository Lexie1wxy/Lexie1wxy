---
tags: 
- 算法
categories: 
- 基础
- 算法笔记1
typora-root-url: ../_posts
top: true
---



## 第二章 C/C++快速入门

### 2.1 基本数据类型及输入输出

#### 2.1.2 变量类型及输入输出

| 类型      | 取值范围              | 占用字节      | 格式符            |
| --------- | --------------------- | ------------- | ----------------- |
| int       | 10的9次方以内整数     | 4字节（32位） | %d                |
| long long | 10的10次方~10的18次方 | 8字节（64位） | %lld              |
| float     | 6~7位有效精度         | 32字节        | %f                |
| double    | 15~16位有效精度       | 64字节        | %lf               |
| char      | -128~127              | -128~127      | %c(字符串%s不加&) |
| bool      | 0/1                   | 0/1           |                   |

#### 2.1.3 注意事项：

1. 整型

long long赋值后要加LL；

整型加unsigned表示无符号，会把法术范围挪到正数上来；

2. 浮点型

用double，放弃float；

3. char型

ASCII码——0~9（48~57)、A~Z(65~90)、a~z(97~122) 小写字母比大写大32；

输出字符串格式scanf("%s",str);

#### 2.1.4 三种实用输出格式

1. %md

   不足m位的int变量右对齐输出，高位**空格**补齐；如果本身超过m位，则保持原样

2. %0md

   不足m位的int变量右对齐输出，高位**加0**补齐；如果本身超过m位，则保持原样

3. %.mf

   浮点数保留m位小数输出

#### 2.1.5 getchar/putchar和typedef

1. gerchar()——输入单个字符（一般用来识别换行符）
2. putchar()——输出单个字符
3. typedef long long LL;——起别名

### 2.2 常用math函数

$$
fabs(double x)——取绝对值
$$

$$
pow(double r，double p)——r的p次方
$$

$$
floor(double x) /  ceil(double x)——向/下上取整
$$

$$
pow(double r，double p)——返回r^p
$$

$$
sqrt(double x)——算术平方根
$$

$$
log(double x)——取e的对数（log_ab=log_eb/log_ea）
$$

$$
sin(double x)/cos(double x)  / tan(double x) /asin(double x)  /  acos(double x)   /atan(double x) 正余弦
$$

$$
round(double x)——四舍五入
$$

### 2.3 结构体（struct）的使用

#### 2.3.1 格式

```C++
struct 类型名{

//除自己外的所有数据类型

}结构体变量名；
```

#### 2.3.2访问方法

"."（普通变量）or"->''（指针

#### 2.3.3 初始化

结构体内部可以自定义初始化函数，示例

```c++
struct studenInfo{
int id;
char gender;
studenInfo(int _id,char _gender){
id=_id;
gender=_gender;
}
//可以简化为一行
//studenInfo(int _id,char _gender):id(_id),gender(_gender){}
}stu,*p；
```

### 2.4 memset赋值

对每个元素赋相同的值（0/-1）

格式：memset（a，-1，sizeof（a））；

### 2.5 补充

#### 2.5.1 浮点数的比较

```C++
const double eps=1e-8；
#define Equ(a,b) (fabs((a)-(b))<(eps))
```

#### 2.5.2 各种复杂度

1. 时间复杂度
   $$
   O(1)<O(logn)<O(n)<O(n^2)
   $$

   $$
   ps:两个for循环的n不能超过1000，因为空间复杂度运算次数n^2不能超过10^7
   $$

   ps:两个for循环的n不能超过1000，因为空间复杂度不能超过

2. 空间复杂度

   看数组大小或者其他数据结构大小

3. 编码复杂度

   算法冗长，复杂度就大

## 第三章 入门：入门模拟

### 3.1 简单模拟

题目怎么说就·怎么做，不涉及算法

### 3.2 查找元素

给定元素，然后查找某个满足条件的元素。一般简单查找就是两个for遍历，查找算法第四章涉及

### 3.3 图形输出

1. 找规律输出

2. 定义二维数组输出

### 3.4 日期处理*

平年闰年/大月小月问题，需要细心

```C++
//判断闰年函数
bool isLeap(int year){
    return (year%4==0&&year%100!=0)||(year%400==0)//整除400或者整除4但不整除100
}
```

### 3.5 进制转换*

1. P进制转换成十进制

```C++
//公式法
int y=0,pro=1;//y为最后十进制数，pro为每次的倍数
while(x!=0){
y=y+(x%10)*pro;//获得每次x的个位数
x=x/10;//去掉x的个位数
pro=pro*P;//倍数增长
}
```

2. 十进制转换成Q进制

```c++
//除基取余法
int z[40],num=0;//z存放Q进制y的每一位，num为位数
do{
z[num++]=y%Q;
y=y/Q;
}while(y!=0)//商不为0时才循环，z数组从高位到低位为q进制数
```



### 3.6 字符串处理

#### 3.6.1 相关函数

仔细分析输入输出格式，会有一些细节和边界情况，积累经验，熟练相关函数

| gets              | ges(str)                | puts              | puts(str) |
| ----------------- | ----------------------- | ----------------- | --------- |
| strcmp(str1,str2) | 比较字符串大小（1<2(-)) | strcpy(ste1,str2) | 复制2—>1  |
| strcat(str1,str2) | str2拼接到str1后面      | strlen(str)       | 字符个数  |

#### 3.6.2 sscanf和sprintf

```c++
sscanf(str,"%d",&n);
sprintf(str,"%d",n);
//可以复杂一点，格式和scanf/printf差不多
```

## 第四章 入门：算法初步

### 4.1 排序

#### 4.1.1 选择排序

```c++
//i从[0,n-1]枚举，待排序部分[i,n-1],从小到大，选出最小
int selectSort(){
    for(int i=0,i<n,i++){
        int k=i;
        for(int j=i,j<n,j++){
            if(a[j]<a[k])
                k=j;
        }
        int temp=a[i];//交换位置
        a[i]=a[k];
        a[k]=temp;
    }
    return 0;
}
```

#### 4.1.2 冒泡排序

```C++
//相邻元素比较，从小到大，有序输出
int bubbleSort(){
    for (int i=0; i<n-1; i++){
         for (int j = 0; j < n - 1 - i; j++){
                        if (a[j] > a[j + 1]){
                            int temp=a[j];//交换位置
                            a[j]=a[j+1];
                            a[j+1]=temp;
                        }//左边数更大就换  
                } 
    }
     return 0;              
}
```

#### 4.1.3 插入排序

```C++
//将数组无序部分插入已有序部分
int insertSort(){
 for(int i=1;i<len;i++){
                int key=a[i];
                int j=i;
                while((j>=0) && (key<a[j-1])){
                        a[j]=a[j-1];//数组后移
                        j--;
                }
                a[j]=key;//插入
        }
     return 0;               
}
```

#### 4.1.4归并排序

2-路归并排序思想:------将序列不断两两分组,组内单独排序,然后不断合并.

```C++
const int maxn=100;
//将数组的[L1,R1]与[L2,R2]区间合井为有序区间(此处L2即为R1 +1)
void merge(int A[],int L1,int R1,int L2,int R2){
    int i=L1,j=L2;//i指向A[L1],j指向A[L2]
    int temp[maxn],index=0;//temp临时存放合并后的数组，index为下标    
    while(i <= R1&&j<=R2){
       if(A[i] <= A[j]) {
           temp[index++] = A[i++];//将A[i]加入序列temp
       }else{
           temp[index++] = A[j++];//将A[j]加入序列temp
       }
    }
    while(i <= R1) temp[index++] = A[i++]; //将[L1, R1]的剩余元素加人
    while(j <= R2) temp[index++] = A[j++]; //将[L2, R2]的剩余元素加入
    for(i = 0; i < index; i++) {
        A[L1+i]=temp[i];//将合并后的序列赋值回数组A
    }
}
void mergeSort(int A[],int left,int right){
    if(left<right){
        int mid=(left+right)/2;//取中点
        mergeSort(A,left,mid);//递归
        mergeSort(A,mid+1,right);//递归
        merge(A,left,mid,mid+1,right);//合并
    }
}
```

#### 4.1.5快速排序

把A[1]存入temp,让A[1]左边数都比他小,右边数都比他大的问题:

```C++
//递归实现
int Partition(int A[],int left,int right){
    int temp=A[left];
    while(left<right){
        while(left<right&&A[right]>temp) right--;
        A[left]=A[right];
        
        while(left<right&&A[left]<=temp) left++;
        A[right]=A[left];
    }
    A[left]=temp;
    return left;
}
void quickSort(int A[],int left,int right){
    if(left<right){
        int pos=Partition(A,left,right);
        quickSort(A,left,pos-1);
        quickSort(A,pos+1,right);//反复递归排序直到全部有序
    }
}
```

###

#### 4.1.4 排序题和sort函数的应用

```c++
#include<algorithm>
编写bool cmp()函数
sort(首地址，尾地址的下一个，cmp)
```

### 4.2散列

#### 4.2.1散列(hash)定义和整数散列

将元素通过一个函数转换为整数,时该整数可以尽量唯一的代表这个元素

```c++
const int maxn=10010;
bool hashTable[maxn]={false};
```

key是整数:

1.直接定址法 2.平方取中法 3. 除留余数法

冲突三种方法:

1.线性探查法 2.平方探查法 3.链地址法

####  4.2.2字符串hash初步

举例:将二维坐标P映射成整数H(P)=x*Range+y;

字符串hash是指将字符串S映射成整数 A~Z=0~25,a~z=26~51,整数52~62或者直接拼接

```C++
int hashFunc(char S[],int len){
    int id=0;
    for(int i=0;i<len;i++){
        if(S[i]<='A'&&S[i]>='Z'){
            id=id*52+(S[i]-'A');
        }else if(S[i]<='a'&&S[i]>='z'){
            id=id*52+(S[i]-'a')+26;
        }
    }
    return 0;
}
```

### 4.3递归

#### 4.3.1 分治

分解--------解决---------合并

#### 4.3.2 递归

1. 递归边界:分解的尽头
2. 递归式:将原问题分解成子问题的手段

3. 相关问题:---------全排列------n皇后问题

### 4.4贪心

--------考虑当前状态下局部最优

总的来说,贪心是用来解决一类最优化问题,并希望由局部最优解来推得全局最优解的算法思想.贪心算法适用的问题一定满足最优子结构性质,即一个问题的最优解可以由子问题的最优解有效构造出来.

### 4.5二分

#### 4.5.1二分查找

```c++
#include<stdio.h>
//a[]严格递增,一般采用非递归
int binarySearch(int a[],int left,int right,int x){
    int mid;
    while(left<=right){
        mid=(left+right)/2;
        if(a[mid]==x) return mid;
        else if(a[mid]>x){
            right=mid-1;
        }else{
            left=mid+1;
        }
    }
    return -1;//查找失败
}
int main(){
    const int n=10;
    int a[n]={1,2,3,4,5,6,7,8,9,10};
    printf("%d",binarySearch(a,0,n-1,6));
    return 0;
}
```

ps:如果二分上界超过int数据一半,可能溢出,此时用mid=left+(right-left)/2代替mid=(left+right)/2

#### 4.5.2二分法拓展

求近似平方根问题/装水问题/木棒切割问题

#### 4.5.3快速幂

快速幂又叫二分幂,基于以下事实:
$$
1.如果b是偶数,那么a^b=a*a^{b-1}
$$

$$
2.如果b是奇数,那么a^b=a^{b/2}*a^{b/2}
$$

1. 快速幂的递归写法,时间复杂度O(logb)

```C++
typedef long long LL;
//求a^b%m
LL binaryPow(LL a,LL b,LL m){
    if(b==0) 
        return 1;
    else if(b%2==1) //可以用if(b&1)代替
        return a*binaryPow(a,b-1,m)%m;
    else{
        int mul=binaryPow(a,b/2,m);
        return mul*mul%m;
    }
}
```

2. 快速幂的迭代写法(效率差异不高):

```C++
typedef long long LL;
//求a^b%m
LL binaryPow(LL a,LL b,LL m){
    LL ans=1;
    while(b>0){
        if(b&1){
            ans=ans*a%m;
        }
        a=a*a%m;
        b>>=1;
    }
    return ans;
}
```

### 4.6two points

#### 4.6.1 概念

利用问题本身和序列特性,使用两个下标i,j对序列进行扫描(同向或反向),从而以较低复杂度(一般是O(n))解决问题

```C++
//a[n]递增序列,正整数M,求a[i]+a[j]=M,two points思想示例
while(i<j){
    if(a[i]+a[j]==m){
        ptintf("%d %d\n",i,j);
        i++;
        j--;
    }else if(a[i]+a[j]<m){
        i++;
    }else{
        j--;
    }
}//序列合并问题在下一小节有递归和非递归实现
```

#### 4.6.2归并排序

2-路归并排序思想:------将序列不断两两分组,组内单独排序,然后不断合并.

```C++
const int maxn=100;
//将数组的[L1,R1]与[L2,R2]区间合井为有序区间(此处L2即为R1 +1)
void merge(int A[],int L1,int R1,int L2,int R2){
    int i=L1,j=L2;//i指向A[L1],j指向A[L2]
    int temp[maxn],index=0;//temp临时存放合并后的数组，index为下标    
    while(i <= R1&&j<=R2){
       if(A[i] <= A[j]) {
           temp[index++] = A[i++];//将A[i]加入序列temp
       }else{
           temp[index++] = A[j++];//将A[j]加入序列temp
       }
    }
    while(i <= R1) temp[index++] = A[i++]; //将[L1, R1]的剩余元素加人
    while(j <= R2) temp[index++] = A[j++]; //将[L2, R2]的剩余元素加入
    for(i = 0; i < index; i++) {
        A[L1+i]=temp[i];//将合并后的序列赋值回数组A
    }
}
void mergeSort(int A[],int left,int right){
    if(left<right){
        int mid=(left+right)/2;//取中点
        mergeSort(A,left,mid);//递归
        mergeSort(A,mid+1,right);//递归
        merge(A,left,mid,mid+1,right);//合并
    }
}
```

#### 4.6.3快速排序

把A[1]存入temp,让A[1]左边数都比他小,右边数都比他大的问题:

```C++
//递归实现
int Partition(int A[],int left,int right){
    int temp=A[left];
    while(left<right){
        while(left<right&&A[right]>temp) right--;
        A[left]=A[right];
        
        while(left<right&&A[left]<=temp) left++;
        A[right]=A[left];
    }
    A[left]=temp;
    return left;
}
void quickSort(int A[],int left,int right){
    if(left<right){
        int pos=Partition(A,left,right);
        quickSort(A,left,pos-1);
        quickSort(A,pos+1,right);//反复递归排序直到全部有序
    }
}
```

#### 4.6.4生成随机数

```C++
#include<stdio.h>//程序必备
#include<stdlib.h>//随机数必备
#include<time.h>//随机数必备
int main(){
    srand((unsigned)time(null));//main方法第一句,生成随机数种子
    for(int i=0;i<10;i++){
        printf("%d",rand());
    }
    return 0;
}
```

注意:

1. 生成的是[0,RAND_MAX]范围内整数,如果想输出[a,b]范围内,需要使用rand()%(b-a+1)+a;显然rand()%(b-a+1)的范围是[0,b-a],再加上a就是[a,b]

2. 想生成更大范围的随机数

   (int)(round(1.0*rand()/RAND_MAX*(b-a)+a)

### 4.7其他高效技巧与算法

#### 4.7.1打表

1. 在程序中一次性计算出所有需要用到的结果,之后的查询直接取这些结果;
2. 在程序B中分一次或多次计算出所有需要用到的结果,写在程序A中结果集中,然后在程序A中就可以直接使用这些结果;
3. 先暴力计算小范围数据,再找规律.

#### 4.7.2 活用递推

一种思想,细心考虑找出题目中递推关系.

#### 4.7.3随机选择算法

原理:类似于随即快速排序算法,

问题:从一个无序数组中求得第K大的数字

```C++
//递归实现
int randPartition(int A[],int left,int right){
    int temp=A[left];
    while(left<right){
        while(left<right&&A[right]>temp) right--;
        A[left]=A[right];
        
        while(left<right&&A[left]<=temp) left++;
        A[right]=A[left];
    }
    A[left]=temp;
    return left;
}
int randSelect(int a[],int left,int right,int K){
    if(left==right) return a[left];
    int p=randPartition(a,left,right);
    int M=p-left+1;//主元是a[p],第p-left+1大的数
    if(K==M) return a[p]
    else if(K<M){
        randSelect(a,left,p-1,K);//往左找
    }else{
        randSelect(a,p+1,right,K-M);//往右找
    }
}
```



## 第五章 入门：数学问题

### 5.1简单数学

掌握简单的数理逻辑,就是些水题,ccf第一题那种.

### 5.2最大公约数与最小公倍数

#### 5.2.1最大公约数

--------------------实现原理:欧几里得算法(辗转相除法)

1. 递归式:        gcd(a,b)=gcd(b,a%b)
2. 递归边界:     gcd(a,0)=a
3. 代码实现:

```C++
int gcd(int a,int b){
        if(b==0) return a;
        else return gcd(b,a%b);
}
//更简洁的写法
int gcd(int a,int b){
    return !b?a:gcd(b,a%b);
}
```

#### 5.2.2最小公倍数

1. 公式:a*b/d
2. 代码实现

```c++
int main(){
    int d=gcd(a,b);
    printf("%d",(a*b/d));
}
```

### 5.3分数的四则运算

所谓的分数的四则运算是指,给定两个分数的分子和分母,求他们加减乘除的结果

#### 5.3.1分数的表示和化简.

1. 分数的表示-------对个分数来说， 最简洁的写法就是写成假分数的形式， 即无论分子比分母大或者小，都保留其原数。因此可以使用一个结构体来存储这种只有分子和分母的分数:

   于是就可以定义Fraction 类型的变量来表示分数，或者定义数组来表示一堆分数。其中需要对这种表示制订三项规则:
          ①使down为非负数。如果分数为负，那么令分子up为负即可。
          ②如果该分数恰为0，那么规定其分子为0，分母为1。
          ③分子和分母没有除了1以外的公约数。

   ```C++
   struct Fraction{//分数
   int up, down;//分子、分母
   }
   ```

2. 分数的化简-------分数的化简主要用来使Fraction变量满足分数表示的三项规定，因此化简步骤也分为以下三步:
          ①如果分母down为负数，那么令分子up和分母down都变为相反数。
          ②如果分子up为0，那么令分母down为1.
          ③约分:求出分子绝对值与分母绝对值的最大公约数d,然后令分子分母同时除以d.
           代码如下:

   ```c++
   Fraction reduction (Fraction result){
   if(result.down < 0) {
   //分母为负数，令分子和分母都变为相反数
   result.up = -result.up;
   result.down = - result.down;
   }
   //如果分子为0,令分母为1
   if (result.up == 0) {
   result.down = 1;
   }
   //如果分子不为0，进行约分
   else {
   int d=gcd(abs (result .up), abs (result dow)); //分子分母的最大公约数
   result.up /= d;//约去最大公约数
   result.down /= d;
   return result; 
   }
   ```

   

#### 5.3.2分数的四则运算

1. 加减:

result=(f1.up\*f2.down+f1.down\*f2.up)/(f1.down*f2.down)

result=(f1.up\*f2.down-f1.down\*f2.up)/(f1.down*f2.down)

2. 乘除

result=(f1.up\*f2.up)/(f1.down*f2.down)

result=(f1.up\*f2.down)/(f1.down*f2.up)

3. ps:必须当心判断除数不为0

#### 5.3.3分数的输出

1. 分数的输出根据题目的要求进行，但是大体上有以下几个注意点: 
   ①输出分数前，先化简
   ②如果分数r的分母down为1,该分数是整数,一般来说题目会要求直接输出分子而省略分母。
   ③如果分数r的分子up的绝对值>分母down (想一想分子为什么要取绝对值? )，说明该分数是假分数，此时应按带分数的形式输出，即整数部分为r.up /r.down,分子部分为
   abs(r.up) % r.down,分母部分为r.down.
   ④以上均不满足时说明分数r是真分数，按原样输出即可。

2. 以下是一个输出示例:

   ```c++
   void showResult (Fraction r) {
   //输出分数,先分数化简
   r=reduction(r) ;
   //整数
   if(r.down==1) printf("%lld", r.up) ;
   //假分数
   else if(abs(r.up) > r.down) {
   printf("%d %d/%d", r.up / r.down, abs(r.up) %r.down, r.down) ;
   } else {
   //真分数
   printf ("%d%d", r.up,r.down) ;
   /*强调一点:由于分数的乘法和除法的过程中可能使分子或分母超过int型表示范围，因
   此一般情况下，分子和分母应当使用long long型来存储。*/
   ```

### 5.4素数

**1不是素数,也不是合数**

#### 5.4.1素数判断

如果存在被整除的数，一定有一个小于sqrt(n),一个大于sqrt(n)

```C++
bool isPrime(int n){
    if(n==1) return false;
    int sqr=(int)sqrt(n*1.0);
    for(int i=2;i<=sqr;i++){
        if(n%i==0) return false;
    }
    return ture;
}
```

#### 5.4.2素数表

```C++
//n为10的5次方以内的范围
const int maxn=101;
int Prime[maxn],pNum=0;
bool p[maxn]={0};
int Find_Prime(){
    for(int i=1;i<maxn;i++){
        if(isPrime[i]){
            Prime[pNum++]=i;
            p[i]=1;
        }
    }
}
```

#### 5.4.3埃氏筛法:

------------如果要求更大的数，则启用

```C++
//n为10的5次方以内的范围
const int maxn=101;
int Prime[maxn],pNum=0;
bool p[maxn]={0};
int Find_Prime(){
    for(int i=2;i<maxn;i++){
        if(p[i]==false){
            Prime[pNum++]=i;
            for(int j=i+i;j<maxn;j+=i){
                //筛去所有i的倍数，循环条件不能写成j<=maxn
                p[j]=1;
            }
        }
    }
}
```

### 5.5 质因子分解

------------将一个正整数分解成一个或多个质数的乘积的形式,分解步骤：

1. 创建一个结构体：

   ```c++
   struct factor{
       int x,cnt;//x_质因子，cnt_其个数
   }fac[10];//fac数组开到10就可以了，不论题目
   ```

2. 枚举1~sqrt(n)所有质因子p，判断是否是n的质因子

   ```C++
   int num=0;
   if(n%prime[i]==0){//如果是质因子
       fac[num].x=prime[i];//增加质因子
       fac[num].cnt=0;//初始化个数
       while(n%prime[i]==0){
           fac[num].cnt++;//计算个数
           n/=prime[i];
       }
       num++;//检查下一个质因子
   }
   ```

3. 上述步骤结束后仍然大于1，还有个大于sqrt(n)的质因子n

   ```C++
   if(n!=1){//无法被除尽
       fac[num].x=n;//把n放进去
       fac[num++].cnt=1;
   }
   ```

### 5.6大整数运算

-----------定义：高精度的整数，就是无法用基础数据类型存储其精度的整数

#### 5.6.1大整数的存储

1. 定义一个整数数组存储，高位存高位，低位存低位的顺序存储，为了方便获取长度，一般定义一个结构体：

```C++
struct bign{
    int len;
    int d[1000];
    bign(){
        memset(d,0,sizeof(d));
        int len=0;
    }//每次结构体变量被定义都会自动初始化
}
```

2. 但每次输入大整数一般用字符串先读入，然后再把字符串另存为bign结构体。由于char数组读入会翻转，高位存低位，低位存高位的顺序存储，即我们需要再翻转回来

```c++
bign change(char str[]){
    bign a;
    a.len=strlen(str);
    for(int i=0;i<a.len;i++){
        a.d[i]=str[a.len-i-1]-'0';//逆着赋值
    }
    return 0；
}
```

3. 如果要比较两个大整数大小的规则：1.判断len大小；2.从高到低比较数字大小。

#### 5.6.2大整数的四则运算

类似于列竖式：

```c++
//高精度加法
bign add(bign a,bign b){
    bign c;
    int carry=0;
    for(int i=0;i<a.len||i<b.len;i++){
        int temp=a.d[i]+b.d[i]+carry;
        c.d[c.len++]=temp%10;//个位为结果
        carry=temp/10；//10位为进位
    }if(carry!=0){
        c.d[c.len++]=carry;
    }
    return c
}
//注意point：这个模板针对非负整数，如果有单个负数，可以转换时去负号，用减法
//如果都是负数，取绝对值用加法，然后结果加上负数
```

```c++
//高精度减法
bign sub(bign a,bign b){
    bign c;
    int carry=0;
    for(int i=0;i<a.len||i<b.len;i++){
        if(a.d[i]<b.d[i]){//不够减
            a.d[i+1]--;//向高位借位
            a.d[i]+=10;//加10
        }
        c.d[c.len++]=a.d[i]-b.d[i];//减法结果为当前位结果
        while(c.len-1>=1&&c.d[c.len-1]==0){//去除最高位的0且至少保留一位最低位
            c.len--;
        }
    }
    return c
}
//注意point：使用sub前比较两个数的大小，如果被减数小于减数，则调换数组相减，结果加上负号
```

```c
//高精度与低精度乘法
bign multi(bign a,int b){
    bign c;
    int carry=0;
    for(int i=0;i<a.len;i++){
        int temp=a.d[i]*b+carry;
        c.d[c.len++]==temp%10;
        carry=temp/10;
    }whiel(carry!=0){
        c.d[c.len++]=carry%10;
        carry=carry/10;
    }
    return c
}
```

```c
////高精度与低精度除法
bign multi(bign a,int b，int &r){//r为余数
    bign c;
    c.len=a.len;//被除数与商位数一一对应，长度相等
    for(int i=a.len-1;i>=0;i--){
        r=r*10+a.d[i];
        if(r<b) c.d[i]=0//不够除
        else{//够除
             c.d[i]=r/b;
             r=r%b;
            }
    }
    while(c.len-1>=1&&c.d[c.len-1]==0){//去除最高位的0且至少保留一位最低位
        c.len--;
    }
    return c
}
```

### 5.7扩展欧几里得算法

暂时不学，有需要再回来

### 5.8组合数

#### 5.8.1关于n!的一个问题

$$
n!中有（n/p+n/p^2+n/p^3+...)个质因子
$$



```c
//n!中有多少个质因子p
int cal(int n,int p){
    int ans=0;
    while(n){
        ans+=n/p;
        n/=p;  
    }
    return ans;
}
```

上面这个可以推广计算**n!的末尾有多少个0（等于n!中因子10的个数）**

一个概念：

**n！中质因子p的个数，实际上等于1~n中p的倍数的个数n/p加上n/p！中质因子p的个数**

```c
//因此得出cal的递归版本
int cal(int n,int p){
   if(n<p) return 0;//n<p时，不可能再存在质因子
    else return n/p+cal(n/p,p)//返回n/p！中质因子p的个数**
}
```

#### 5.8.2组合数的计算

方法一：根据定义式计算------暴力破解，容易溢出，忽略

方法二：根据递推式计算
$$
递归公式：C_n^m=C_{n-1}^m+C_{n-1}^{m-1}
$$

$$
递归边界：C_n^0=C_n^n=1
$$

```C++
#define long long LL;
LL res[67][67]={0};
LL C(LL n,LL m){ 
    if(m==0||n==m) return 1;
    else if(res[n][m]!=0) return res[n][m];//记录已经计算过的C[n][m],防止重复计算
    else return res[n][m]=C(n-1,m)+C(n-1,m-1);//赋值并返回
}
```

方法三：定义式变形

```c
#define long long LL;
LL C(LL n,LL m){
    LL ans=1;
    for(LL i=1;i<=m;i++){
        ans=ans*(n-m+1)/i;
    }
    return ans;
}
```

#### 5.8.2 组合数%p的计算

1. 方法一：通过递推式(只要在源代码合适的地方对p取模就行)

```c
#define long long LL;
LL res[67][67]={0};
LL C(LL n,LL m){ 
    if(m==0||n==m) return 1;
    else if(res[n][m]!=0) return res[n][m];//记录已经计算过的C[n][m],防止重复计算
    else return res[n][m]=C(n-1,m)+C(n-1,m-1)%p;//赋值并返回
}
```

2. 方法二：根据定义式(原理P186，比较复杂，看书吧)

```c
//使用筛法得到素数表prime,注意表中最大素数不得小于n
int prime[maxn];
//计算C(n,m)%p
int C(int n,int m,int p){
int ans = 1;
//遍历不超过n的所有质数
for(int i = 0; prime[i] <= n;i++) {
//计算C(n,m)中prime[i]的指数c，cal (n,k)为n!中含质因子k的个数
int C = cal(n, prime[i]) - cal (m, prime[i]) -cal(n - m, prime[i]);
//快速幂计算prime[i]^c%p
ans = ans * binaryPow(prime[i], C，p)%p;
return ans;
```

3. 方法四：lucas定理（需要结合方法2使用）

```c
int lucas(int n,int m){
    if(m==0) return 1;
    else return C(n%p,m%p)*Lucas(n/p,m/p)%p;
}//原理没看，代码不长可以死记，或者看书189页

```

4. 方法数据范围

| 示例  | n       | m       | p               | 方法   |
| ----- | ------- | ------- | --------------- | ------ |
| case1 | <=10^4  | <=10^4  | <=10^9          | 方法一 |
| case2 | <=10^6  | <=10^6  | <=10^9          | 方法二 |
| case3 | <=10^18 | <=10^18 | <=10^9(p是素数) | 方法四 |

方法三太长了，以后再看，一般情况下方法一就够用了。

## 第六章 C++标准模板库STL

---------------------------------------------***（Standard Template Library）***

-----------------------------------------------#include<stdlib.h>//标准库函数

### 6.1vector

#### 6.1.1 定义

中文译名：“向量”，容易理解的叫法：“变长数组”，即“长度根据需要自动改变的数组”

```c
#include<vector>
//格式
vector<typename> name;
//基本数据类型举例
vector<int> array[arraySize];
//注意：typename是STL容器是，>>之间必须加空格，举例
vector<vector<int> > vi;
```

#### 6.1.2元素访问

1. 下标访问 

   范围0~v.size-1,比如v[0],v[1]等

2. 迭代器访问

   迭代器iterator类似于指针,通过*it来访问

```c
//格式
vector<typename>::iterator it;
//举例
vector<int>::iterator it=vi.begin();
it++;it--;
//*(it+1)等价于vi[i]
```

3. 注意：
   1. vi.begin()指向首地址，vi.end()指向尾地址下一个空地址，因为美国人习惯左闭右开
   2. 只有vector和string中，才允许vi.begin()+3这种整数加迭代器的写法

#### 6.1.3常用函数

```c
vi.push_back(x);//尾部添加元素
vi.pop_back(x);//删除尾元素
vi.size();//获得元素个数
vi.clear();//清除所有元素
vi.insert(it,x);//向it位置插入x
vi.erase(it);//删除迭代器为it位置的元素
vi.erase(first,last)//删除[first,last)范围内的所有元素
```

#### 6.1.4常见用途

1. 存储数据
2. 用邻接表存储图——10.2.2节

### 6.2set

#### 6.2.1定义

中文译名：“集合”，即“内部自动有序且不含重复元素的容器”，字面理解可知set内元素自动递增，且自动去除重复元素

```c
#include<set>
//格式
set<typename> name;
//基本数据类型举例
set<int> array[arraySize];
//注意：typename是STL容器是，>>之间必须加空格，举例
set<set<int> > st;
```

#### 6.2.2元素访问

只能用迭代器访问，不支持*（it+i）来访问，只能枚举

#### 6.2.3常用函数

```c
st.size();//获得元素个数
st.clear();//清除所有元素
st.insert(x);//插入x
st.find(x);//返回对应值为x的迭代器
//删除单个元素-------------------------------------------------
st.erase(st.find(x));//删除迭代器为it位置的元素，可以搭配find(x)
st.erase(x);//直接删除值为x的set元素
//删除多个元素-------------------------------------------------
st.erase(first,last)//删除[first,last)范围内的所有元素，可以搭配find(x)
```

#### 6.2.4常见用途

自动去重以及升序排序。

延申：set元素唯一，不唯一用multiset。另外C++ 11中·增加了unordered_set,只去重不排序。

### 6.3string

#### 6.3.1定义

```c
#include<string>//注意和string.h不一样
string str="str";
```

#### 6.3.2元素访问

1. 通过下标访问和迭代器访问都可以，而且迭代器可支持直接+i；

2. 读入与输出一般cin/cout，如果想用printf，可以str.c_str(）将string类型强制转换为字符数组。

#### 6.3.3常用函数

```c
operator +;//字符串拼接，str1+str+2
compare operator：包括==,!=,<,<=,>,>=//按字典序比较
str.size() / str.length();//字符串长度

str.insert();//插入
str.insert(pos,string);//pos位置插入string
str.insert(it,it2,it3);//[it2,it3)位置字符串插入it位置

//删除单个元素-------------------------------------------------
str.erase(it);//删除迭代器为it位置的元素
//删除多个元素-------------------------------------------------
str.erase(first,last);//删除[first,last)范围内的所有子串
str.erase(pos,length);//pos插入位，length删除长度
    
str.clear();//清除所有元素
str.substr(pos,len);//返回pos位置长度为len的字符串
str.find(str);//寻找字符串str,没找到返回string:npos;
str.find(str，pos);//寻找pos开始往后的字符串str,没找到返回string:npos;
string:npos;//常数，-1

str.replace(pos,len,str2);//把pos位置开始长度为len的字符串替换为str2
str.replace(it1,it2,str2);//把[it1，it2)的字符串替换成str2
```

### 6.4map

#### 6.2.1定义

中文译名：“映射”，即“将任何基本类型（包括STL容器）映射到任何基本类型（包括STL容器）”，map会以键值从小到大排序，键值对唯一。

```c
#include<map>
//格式
map<typename1,typename2> name;//将typename1（键key）映射到typename2（值value）
//基本数据类型举例
map<set<int>,string> mp;
```

#### 6.2.2元素访问

1. 下标：mp[key]

2. 迭代器：it->first访问key，it-second访问value

#### 6.2.3常用函数

```c
mp.find(key);//寻找键值为key的迭代器

//删除单个元素-------------------------------------------------
mp.erase(it);//删除迭代器为it位置的元素
mp.erase(key);//删除key对应的元素
//删除多个元素-------------------------------------------------
mp.erase(first,last);//删除[first,last)范围内的所有子串
    
mp.size();//获得映射对数
mp.clear();//清除所有元素
```

#### 6.2.4常见用途

1. 字符串与整数映射题目
2. 判断大整数或者其他类型数据是否存在的题目，把map当bool数组用
3. 字符串和字符串的映射
4. 延申：map元素唯一，不唯一用multimap。另外C++ 11中·增加了unordered_map,只映射不排序。

### 6.5queue

#### 6.2.1定义

先进先出，类似排队，队首指针front，队尾指针rear

#### 6.2.2元素访问

1. 队首指针front——队首元素，初始-1
2. 队尾指针rear——队尾元素，初始-1

#### 6.2.3常用函数

```C++
//先进先出，类似排队，队首指针front，队尾指针rear
#include<queue>
queue<Type> q; //其中Type为数据类型（如 int，float,char等）
q.push(item)           //q[++rear];         将item压入队列尾部  
q.pop()                //front++;           删除队首元素，但不返回  
q.front()              //q[front+1];        返回队首元素，但不删除  
q.back()               //q[rear];           返回队尾元素，但不删除  
q.size()               //return rear-front; 返回队列中元素的个数  
q.empty()              //if(front==rear){}; 检查队列是否为空，如果为空返回true，否则返回false  
```

#### 6.2.4常见用途

需要实现广度优先搜索时，不手动实现而是用queue做代替

注意：使用front()和pop()之前，必须用empty（）判断队列是否为空，否则可能因此出现错误。

### 6.6priority_queue

#### 6.4.1定义

优先队列，底层是堆，队首元素是优先级最高的那一个

#### 6.4.2元素访问

没有front()/back()函数，只能通过top()来访问队首元素

#### 6.4.3常用函数

```C++
//先进先出，类似排队，队首指针front，队尾指针rear
#include<queue>
priority_queue<Type> q; //其中Type为数据类型（如 int，float,char等）
q.push(item)           //q[++rear];         将item压入队列尾部  
q.pop()                //front++;           删除队首元素，但不返回  
q.top()              //q[front+1];        返回队首元素，但不删除  
q.size()               //return rear-front; 返回队列中元素的个数  
q.empty()              //if(front==rear){}; 检查队列是否为空，如果为空返回true，否则返回false  
```

#### 6.4.4常见用途

解决一些贪心问题（9.8节），或者对Dijkstra算法进行优化

注意：使用top()之前，必须用empty（）判断队列是否为空，否则可能因此出现错误。

#### 6.4.5元素优先级的设置

1. 基础类型

```c
//格式
priority_queue<typename,vector<typename>,less<typename> > q;
//less<typename>表示数字大的优先级大，而greater<typename>表示数字小的优先级大

//示例
priority_queue<int,vector<int>,less<int> > q;
priority_queue<double,vector<double>,less<double> > q;
```

2. 结构体类型

```c
struct fruit{
    string name;
    int price;
    friend bool operater < (fruit f1,fruit f2){
        return f1.price>f2.price;
    }
};//此时水果价格低的，优先级高
-----------------------------------------------------------
    另一种方法看书，暂时准备只记这个
```

可以推出：

如果基本数据类型或者其他STL容器，也可以通过同样的方式来定义优先级

如果结构体数据较为庞大，建议使用引用提供效率，此时要加上const和&

```c
struct fruit{
    string name;
    int price;
    friend bool operater < (const fruit &f1,const fruit &f2){
        return f1.price>f2.price;
    }
};//此时水果价格低的，优先级高
```

### 6.7stack

#### 6.7.1定义

栈，后进先出，类似盒子，栈顶指针TOP=-1

#### 6.7.2元素访问

s.top();

#### 6.7.3常用函数

```c
//后进先出，类似盒子，栈顶指针TOP=-1
#include<stack>
stack<Type> s;//其中Type为数据类型（如 int，float,char等）。
s.push(item);       //st[++TOP]=item;  将item压入栈顶  
s.pop();            //TOP--;           删除栈顶的元素，但不会返回  
s.top();            //return st[TOP];  返回栈顶的元素，但不会删除  
s.size();           //return TOP+1;    返回栈中元素的个数  
s.empty();          //if(TOP==-1){};   检查栈是否为空，为空返回true，否则返回false   
```

#### 6.7.4常见用途

模拟递归，防止栈内存溢出

### 6.8pair

#### 6.8.1定义

"对"，实用的小玩意儿，把两个元素绑定成为一个元素------类似于内部有两个元素的结构体

```c
#include<map>//可以用utility
pair<typename1,typename2> name;
```

初始化方法：

```c
1. pair<string,int> p("haha",5);
代码中想临时构建的话---------------------------------
1. pair<string,int>("haha",5);
2.make_pair("haha",5);//自带的make_pair函数
```

#### 6.8.2元素访问

```
p.first();            p.second();
```

#### 6.2.3常用函数

compare operator:

<font color="red">**==/!=/</<=/>/>=**</font>--------------------直接比较first元素，不能比较大小就second

#### 6.2.4常见用途

1. 代替二元结构体及构造函数；
2. 作为map键值对来给map插入。

### 6.9algorithm头文件下常用函数

#### 6.9.1max() / min() / abs()

```c
max(int/double x,int/double y);//返回x，y中最大值
min(int/double x,int/double y);//返回x，y中最小值
abs(int x);//返回绝对值
//fabs(double x);返回浮点数绝对值，它在math头文件下
```

#### 6.9.2swap()

```c
swap(x,y);//交换
```

#### 6.9.3reverse()

```c
reverse(it1,it2);//将数组指针在[it1,it2)的元素进行反转
```

#### 6.9.4next_permutation()

```c
next_permutation()//给出一个序列在全排列中的下一个序列
//示例
int a[10]={1,2,3};
do{
printf("%d %d %d\n",a[0],a[1],a[2]);
}while(next_permutation(a,a+3))
//memset到达全排列最后一个时会返回false，必须得用do while
```

#### 6.9.5fill()

```c
fill()//把某段区间赋值为相同的值
//示例
int a[10]={1,2,3};
fill(a,a+10,233);//a[0]~a[4]都赋值为233
```

#### 6.9.6sort()

```c
sort(首地址，尾地址的下一个地址，cmp比较函数);//默认递增排序
cmp();//cmp函数定义根据要比较的规则来写
注意：容器的比较只涉及vector，string，deque可以使用sort，因为set和map本身有序（红黑树实现）
```

#### 6.9.7lower_bound() /  upper_bound()

````c
lower_bound(first,last,val);//范围内大于等于val的第一个值的坐标（指针或者迭代器）
upper_bound(first,last,val);//范围内大于val的第一个值的坐标（指针或者迭代器）
````

## 第七章 提高：数据结构专题（1）

### 7.1栈stack

1. 数组实现栈时，TOP指针int型     2. 链表实现栈时，TOP指针int*型；
2. TOP指针始终指向栈最上方一个元素

```C++
//后进先出，类似盒子，栈顶指针TOP=-1
#include<stack>
stack<Type> s;//其中Type为数据类型（如 int，float,char等）。
s.clear();          //return TOP=-1；  清空栈——注意！STL中没有实现栈的清空，需要自己写
s.push(item);       //st[++TOP]=item;  将item压入栈顶  
s.pop();            //TOP--;           删除栈顶的元素，但不会返回  
s.top();            //return st[TOP];  返回栈顶的元素，但不会删除  
s.size();           //return TOP+1;    返回栈中元素的个数  
s.empty();          //if(TOP==-1){};   检查栈是否为空，为空返回true，否则返回false   
```

### 7.2队列queue

1. 队首指针front——队首元素前一个位置，初始-1
2. 队尾指针rear——队尾元素，初始-1

```C++
//先进先出，类似排队，队首指针front，队尾指针rear
#include<queue>
queue<Type> q; //其中Type为数据类型（如 int，float,char等）
q.clear();             //front=clear=-1;    清空栈——注意！STL中没有实现栈的清空，需要自己写
q.push(item)           //q[++rear];         将item压入队列尾部  
q.pop()                //front++;           删除队首元素，但不返回  
q.front()              //q[front+1];        返回队首元素，但不删除  
q.back()               //q[rear];           返回队尾元素，但不删除  
q.size()               //return rear-front; 返回队列中元素的个数  
q.empty()              //if(front==rear){}; 检查队列是否为空，如果为空返回true，否则返回false  
```

### 7.3链表

#### 7.3.1链表概念

- 不连续的由若干个结点连接成的表，每个结点代表一个元素，由数据域和指针域组成

- 分为有头结点和无头结点，我们一般创建的时有头结点的

- 头结点的数据域为空，指向的第一个结点保存第一个data

<img src="/../images/%E7%AE%97%E6%B3%95%E7%AC%94%E8%AE%B0/image-20200629032529825.png" alt="image-20200629032529825" style="zoom: 25%;" />

```c
struct node{
    typename data;//数据域
    node* next;//指针域
};//定义结点
```

#### 7.3.2为链表node分配内存空间

1.new运算符（推荐）

```c
//格式
typename* p=new typename;
//举例
node* p=new node;
//定义后要释放内存，否则可能造成内存泄漏
delete(p);
```

2.malloc函数

```c
//格式
typename* p=(typename*)malloc(sizeof(typename));
//举例
node * p=(node*)malloc(sizeof(node));
//定义后要释放内存，否则可能造成内存泄漏
free(p);
```

#### 7.3.3链表基本操作

1. 创建链表

```c
#include<stdio.h>//标准输入输出
#include<stdlib.h>//标准库函数
struct node{
    int data;
    node* next;
};
//创建链表
node* create(int a[]){
    node *p,*pre,*head;//p---临时结点，pre----临时结点的前置结点
    head=new node;
    head->next=null;
    pre=head;//把前置结点设置为头结点
    for(int i=0;i<5;i++){
        p=new node;
        p->data=a[i];
        p->next=null;
        pre->next=p;//前驱节点的指针域指向p
        pre=p;
    }
    return head;//返回创建完成的头结点
}
int main(){
    int a[5]={1,2,3,4,5}
    node* L=create(a);
    L=L->next;//第一个结点才有数据
    while(L!=null){//指针不指向空地址
        printf("%d",L->data);
        L=L->next;
    }
    return 0;
}
```

2. 查找元素

```c
从头结点开始遍历查找就行，代码很简单
```

3. 插入元素

```c
void insert(node *head,int pos,int x){//把x插入以head为头结点的链表的第pos位置上
    node *p=head;
    for(int i=0;i<pos-1;i++){//只到pos的前一个停下
        p=p->next;
    }
    node *q=new node;//新建插入结点
    q->data=x;//数据x
    q->next=p->next;//新结点指向插入前原先pos位置的结点
    p->next=q;//前一个位置的结点指向新结点
}
```

4. 删除元素

```c
void del(node *head,int x){
    node *p=head->next;
    node *pre=head;
    while(p!=null){
      if(p->data==x){
        pre->next=p->next;
        delete(p);
        p=pre->next;
      }else{
        pre=p;
        p=p->next;
      }
    }
}
```

#### 7.3.4静态链表

实现原理是hash，不需要头结点，其他和动态链表差不多

```c
/* 线性表的静态链表存储结构 */
struct Node
{
    typename data;//数据域
    int cur; //游标，指向下一个数组下标，类似于指针域
}node[size]
//要用到的时候再看细节
```



​                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        